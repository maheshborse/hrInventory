<app-card [hidHeader]="true" *ngIf="hidemainGrid === false">
    <div class="row tableheader">
        <div class="col-sm-8">
            <i class="material-icons search-icon searchIcon">search</i>
            <input matInput  (keyup)="applyFilter($event.target.value)"  type="text" name="search" placeholder="Search.."></div>
        <div class="col-sm-4">
            <button mat-raised-button color="primary" class="buttonLeft" (click)="openDTEDetails('add')">
            Add DTE Details
        </button>
        
    </div>
</div>
<table mat-table  [dataSource]="dataSource" class="mat-elevation-z8" matSort>
    <ng-container matColumnDef="employeeName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Employee Name</th>
        <td mat-cell *matCellDef="let element"> {{element.employeeName}} </td>
    </ng-container>
    <ng-container matColumnDef="dispatchDate">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Dispatch Date </th>
        <td mat-cell *matCellDef="let element"> {{element.dispatchdate | date :'dd/MM/yyyy'}} </td>
    </ng-container>
    
    <ng-container matColumnDef="totalQuantity">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Total Quantity</th>
        <td mat-cell *matCellDef="let element"> {{element.totalqty}} </td>
    </ng-container>
    <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef > Action </th>
        <td mat-cell *matCellDef="let element">
            <i  class="material-icons" style="cursor: pointer;" (click)="getDispatchDataEdit(element,'edit')">mode_edit</i>
            <i  class="material-icons" (click)="delete(element.dispatchid)" style="cursor: pointer;">delete</i>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" ></tr>
 </table>

 <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
</app-card>

<app-card  *ngIf="checkAddDispatchDetails === true" [hidHeader]="true">
    <div class="row tableheader">
      <div class="col-sm-6" style="right: 41%;">
          <button mat-raised-button color="primary" class="buttonLeft" (click)="addData()"  [disabled]="(materialFillGrid.length ==0 )?true:false">
              Save
           </button>
      </div>
       <div class="col-sm-6" >
        <button mat-raised-button color="primary" class="buttonLeft" (click)="openDTEList()">
          Back to DTE List
      </button>
   </div>
  </div>
  <hr>
  <br>
  <div class="row material2">
       <form class="example-form col-sm-6">
          <mat-form-field class="example-full-width">
              <mat-label>Employee Name</mat-label>
              <mat-select #employeeName name="employeeName" [(ngModel)]="Employeename" (selectionChange)="changeEmployee($event.value)"  >
                <mat-option  *ngFor=" let employee of employeeOption"  [value]="employee.value">{{employee.label}}
              </mat-option>
              </mat-select>
              </mat-form-field>
        </form>
        <form class="example-form col-sm-6">
          <mat-form-field class="example-full-width">
              <input matInput [matDatepicker]="picker" placeholder="Dispatch Date"  (input)="dateofBirth=$event.target.value" name="dob" #dob="ngModel" [(ngModel)]="dateofBirth">
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>

        </form>
  </div>
  <br>
  <br>
  <div class="row material2">
      <form class="example-form col-sm-6">
          <mat-form-field class="example-full-width">
              <mat-label>Product Name</mat-label>
              <mat-select #productName name="productName" [(ngModel)]="Productname" (selectionChange)="changeProduct($event.value)">
                <mat-option  *ngFor=" let product of productOption"  [value]="product.value" >{{product.label}}
              </mat-option>
              </mat-select>
              </mat-form-field>
        </form>
        <form class="example-form col-sm-6">  
          <mat-form-field class="example-full-width">
              <input matInput placeholder="Category Name" [value]="categoryName" readonly >
          </mat-form-field>
      </form>
  </div>
  <br>
  <div class="row material2">
    <form class="example-form col-sm-6">
        <mat-form-field class="example-full-width">
            <input matInput placeholder="Current Stock" type="number" #stock name="stock" [(ngModel)]="Stock" [value]="Stock" readonly >
        </mat-form-field>
    </form>
      <form class="example-form col-sm-6">
            <mat-form-field class="example-full-width">
              <input matInput placeholder="Dispatch Quantity" #quantity name="quantity" [(ngModel)]="Quantity" type="number" (keyup)="getQuantity($event.target.value)">
            </mat-form-field>
        </form>
    </div>
  
  <br>
  <button mat-raised-button color="primary" style="border-radius: 20px !important;"  (click)="addDataOnGrid()" [disabled]="employeeName.value =='' || productName.value =='' || stock.value =='' || quantity.value ==''">
      Add
   </button>
  <br>
  <br>
  <div class="row material2">
  <table class="table table-striped">
      <thead>
        <tr>
          <th scope="col">Product Name</th>
          <th scope="col">Dispatch Quantity</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let material of materialFillGrid ; let i = index">
          <td>
              {{material.ProductName}}
          </td>
          <td>
              {{material.Quantity}}
          </td>
          <td>
              <i class="material-icons" style="cursor: pointer;" (click)="deletematerialonGird(i)">delete</i>
          </td>
          
      </tr>
       </tbody>
    </table>
  </div>
  <br>
  
  <div class="row material2">
        <form class="example-form col-sm-6" style="left: 50%;">  
          <mat-form-field class="example-full-width">
              <input matInput placeholder="Total Quantity" (input)="totalQuantityText=$event.target.value"   [(ngModel)]="totalQuantityText"  readonly [ngModelOptions]="{standalone: true}" >
          </mat-form-field>
      </form>
     
  </div>

</app-card>
  
