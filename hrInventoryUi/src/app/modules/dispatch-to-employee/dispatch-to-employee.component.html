<app-card [hidHeader]="true" *ngIf="hidemainGrid === false">
    <div class="row tableheader">
        <div class="col-sm-8">
            <i class="material-icons search-icon searchIcon">search</i>
            <input matInput  (keyup)="applyFilter($event.target.value)"  type="text" name="search" placeholder="Search.."></div>
        <div class="col-sm-4">
            <button mat-raised-button color="primary" class="buttonLeft" (click)="openDispatchDetails('add')">
            Add Dispatch Details
         </button>
    </div>
    </div>
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" matSort>
        <ng-container matColumnDef="employeeName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Employee Name</th>
            <td mat-cell *matCellDef="let element"> {{element.employeeName}} </td>
        </ng-container>
        <ng-container matColumnDef="dispatchdate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Dispatch Date </th>
            <td mat-cell *matCellDef="let element"> {{element.dispatchdate | date :'dd/MM/yyyy'}} </td>
        </ng-container>
        <ng-container matColumnDef="totalqty">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Total Quantity </th>
            <td mat-cell *matCellDef="let element"> {{element.totalqty}} </td>
        </ng-container>
        <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef > View </th>
            <td mat-cell *matCellDef="let element">
                <!-- <i  class="material-icons" style="cursor: pointer;" (click)="getDispatchDataEdit(element,'edit')">mode_edit</i>
                <i  class="material-icons" (click)="delete(element.dispatchid)" style="cursor: pointer;">delete</i> -->
                <i style="cursor: pointer;color: blue;" (click)="showDialogue(element)" class="fas fa-eye"></i>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" ></tr>
     </table>
     <mat-paginator #paginator
     [pageSize]="10"
     [pageSizeOptions]="[5, 10, 20]"
     [showFirstLastButtons]="false">
    </mat-paginator>
    
    
</app-card>
<app-card  *ngIf="checkAddDispatchDetails === true" [hidHeader]="true">
   
    <div class="row tableheader">
        <div class="col-sm-6" style="right: 41%;">
            <button mat-raised-button color="primary" class="buttonLeft" (click)="addData()" [disabled]="(dispatchFillGrid.length ==0 )?true:false" >
                Save
             </button>
            </div>
            <div class="col-sm-6" >
                <button mat-raised-button color="primary" class="buttonLeft" (click)="openDispatchList()">
                  Back to Dispatch List
              </button>
           </div>
            </div>
    <hr>
    <br>

    <div class="row material2">
        <form class="example-form col-sm-6">
            <mat-form-field class="example-full-width">
                <mat-label>Employee Name</mat-label>
                <mat-select name="employeeName"  [(ngModel)]="employeeName"   (selectionChange)="changeEmployee($event.value)" [ngModelOptions]="{standalone: true}">
                  <mat-option  *ngFor=" let employee of employeeOption"  [value]="employee.value" >{{employee.label}}
                </mat-option>
                </mat-select>
                </mat-form-field>
          </form>
          <form class="example-form col-sm-6">
            <mat-form-field class="example-full-width">
                <input matInput [matDatepicker]="picker" placeholder="Choose a date"  (input)="dispatchDate=$event.target.value" name="dod" #dod="ngModel" [(ngModel)]="dispatchDate">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
        </form>
    </div>
    <br>
    <br>
    <div class="row material2">
        <form class="example-form col-sm-6">
            <mat-form-field class="example-full-width">
                <mat-label>Product Name</mat-label>
                <mat-select  [(ngModel)]="selectedValue" (selectionChange)="changeProduct($event.value)" [ngModelOptions]="{standalone: true}">
                  <mat-option  *ngFor=" let product of productOption"  [value]="product.value" >{{product.label}}
                </mat-option>
                </mat-select>
                </mat-form-field>
          </form>
          <form class="example-form col-sm-6">  
            <mat-form-field class="example-full-width">
                <input matInput placeholder="Category Name" [value]="categoryName" readonly >
            </mat-form-field>
        </form>
    </div>
    <br>
    <div class="row material2">
        <form class="example-form col-sm-6">
            <mat-form-field class="example-full-width">
                <input matInput placeholder="Currunt Stock" (input)="stock=$event.target.value" name="stk" #stk="ngModel" [(ngModel)]="stock" type="number" readonly>
                </mat-form-field>
        </form>
        <form class="example-form col-sm-6">
            <mat-form-field class="example-full-width">
                <input matInput placeholder="Quantity" type="number"  (input)="quantity=$event.target.value" name="qty" #qty="ngModel" [(ngModel)]="quantity">
            </mat-form-field>
        </form>
    </div>
    <br>
    <button mat-raised-button color="primary" style="border-radius: 20px !important;"  (click)="addDataOnGrid()"  [disabled]=" quantity =='' || ProductName == '' " >
        Add
     </button>
     <br>
<br>
<div class="row material2">
<table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">Product Name</th>
        <th scope="col">Purchase Quantity</th>
        <th scope="col">Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let dispatch of dispatchFillGrid ; let i = index">
        <td>
            {{dispatch.ProductName}}
        </td>
        <td>
            {{dispatch.Quantity}}
        </td>
        
        <td>
            <i class="material-icons" style="cursor: pointer;" (click)="deleteDispatchOnGird(i)">delete</i>
        </td>
        
    </tr>
     </tbody>
  </table>
</div>
<br>
<div class="row material2">
    <form class="example-form col-sm-6" style="left: 50%;">  
      <mat-form-field class="example-full-width">
          <input matInput placeholder="Total Quantity"  readonly (input)="totalQuantity=$event.target.value"  #TotalQuantity="ngModel"  [(ngModel)]="totalQuantity" [ngModelOptions]="{standalone: true}" >
      </mat-form-field>
  </form>
 
</div>
</app-card>